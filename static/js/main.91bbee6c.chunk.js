(this.webpackJsonpatis=this.webpackJsonpatis||[]).push([[0],{100:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(17),i=n.n(r),s=n(15),c=n(5),u=n(44),l=n(14),p=n(4),m=n(28),f=n.n(m),d=n(45),b=n(23),_=n.n(b),E=_.a.create({baseURL:"https://atis-f5916.firebaseio.com/",headers:{Accept:"application/json","Content-Type":"application/json"}}),w="[CANCELLATION PROCESS] Operation canceled due to the API limits.",h=function(e){return{type:"POST_ANSWER_REQUEST",payload:e}},O=function(e){return{type:"GET_TEST_REQUEST",payload:e}},v=function(e){return{type:"GET_TOPICS_REQUEST",payload:e}},T=function(e){return{type:"REQUEST_FAILURE",payload:e}},g=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];var o;return function(){var t=Object(d.a)(f.a.mark((function t(a){var r,i,s,c,u;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a({type:"INITIALIZE_REQUEST"}),o&&o.cancel(w),r=_.a.CancelToken,o=r.source(),t.prev=4,"POST_ANSWER"!==e){t.next=13;break}return s=n[0],c=n[1],t.next=9,E.post("/gathered/".concat(s,"/answers.json"),JSON.stringify(c),{cancelToken:o.token});case 9:i=t.sent,a(h(i.data)),t.next=26;break;case 13:if("GET_TEST"!==e){t.next=21;break}return u=n,t.next=17,E.get("/test/".concat(u,".json"),{cancelToken:o.token});case 17:i=t.sent,a(O(i.data)),t.next=26;break;case 21:if("GET_TOPICS"!==e){t.next=26;break}return t.next=24,E.get("/topics.json",{cancelToken:o.token});case 24:i=t.sent,a(v(i.data));case 26:t.next=31;break;case 28:t.prev=28,t.t0=t.catch(4),a(T(t.t0));case 31:case"end":return t.stop()}}),t,null,[[4,28]])})));return function(e){return t.apply(this,arguments)}}()},y=n(3),N=n(20),S=function(){window.scrollTo({top:0,left:0,behavior:"smooth"})},k=function(e,t){"Enter"===e.key&&t()},R=function(e,t,n){return e?t:"".concat(t," ").concat(n)},q=function(e){return JSON.parse(JSON.stringify(e,Object.getOwnPropertyNames(e)))},j=function(e){return Object.keys(e).length},C=n(21),A=n.n(C),L=function(e){var t,n=e.direction,a=e.outerClass,r=e.title,i=e.clickHandler;switch(n){case"top":t=A.a.arrowTop;break;case"right":t=A.a.arrowRight;break;case"bottom":t=A.a.arrowBottom;break;case"left":t=A.a.arrowLeft}return o.a.createElement("div",{className:a},o.a.createElement("span",{role:"button",tabIndex:0,className:t,title:r,onClick:i,onKeyDown:function(e){return k(e,i)}}))};L.defaultProps={direction:"top",title:"Control button"};var x=n(11),I=n.n(x),W=Object(c.b)(null,(function(e){return{onGetTestCreator:function(t){return e(g("GET_TEST",t))}}}))((function(e){var t,n=e.label,r=e.options,i=e.isActive,s=e.onGetTestCreator,c=Object(a.useState)({activeOption:0,filteredOptions:[],showOptions:!1,userInput:""}),u=Object(N.a)(c,2),l=u[0],m=u[1],f=l.activeOption,d=l.filteredOptions,b=l.showOptions,_=l.userInput,E=Object(a.useState)(!i),w=Object(N.a)(E,2),h=w[0],O=w[1],v=Object(p.g)(),T=function(e){m({activeOption:0,filteredOptions:[],showOptions:!1,userInput:e.currentTarget.innerText})},g=function(e){m((function(t){return Object(y.a)(Object(y.a)({},t),{},{activeOption:e})}))};_&&b&&(t=0!==d.length?o.a.createElement("ul",{className:I.a.options},d.map((function(e,t){return o.a.createElement("li",{role:"menuitem",className:t===f?I.a.optionActive:void 0,key:e,onClick:T,onKeyDown:function(e){return k(e,T)}},e)}))):o.a.createElement("div",{className:I.a.noShow},"Nothing to show. You are on your own!"));var S=o.a.createElement(L,{direction:"right",outerClass:I.a.continueWrapper,title:"Continue to the test",clickHandler:function(){s(l.userInput),v.push("/aTis/test")}}),R=Object(a.useMemo)((function(){return"".concat(I.a.inputField," ").concat((i?h||_:h)&&I.a.active," ").concat(!i&&!h&&I.a.inactive)}),[i,_,h]);return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:R},o.a.createElement("input",{id:"autocomplete",type:"text",name:"Autocomplete input field",value:_,placeholder:i?n:null,onChange:function(e){var t=e.currentTarget.value,n=r.filter((function(e){return e.toLowerCase().indexOf(t.toLowerCase())>-1}));m({activeOption:0,filteredOptions:n,showOptions:!0,userInput:e.currentTarget.value})},onKeyDown:function(e){13===e.keyCode?m((function(e){return Object(y.a)(Object(y.a)({},e),{},{activeOption:0,showOptions:!1,userInput:d[f]||e.userInput})})):38===e.keyCode?g(0===f?d.length-1:f-1):40===e.keyCode&&(f===d.length-1?g(0):g(f+1))},onFocus:function(){return i&&O(!0)},onBlur:function(){return i&&O(!1)},disabled:!i,autoComplete:"off"}),o.a.createElement("label",{htmlFor:"autocomplete"},i&&n),i&&_&&r.includes(_)&&S),t)}));W.defaultProps={label:"I am a default label! My owner is too lazy to change me.",isActive:!0};var Q=n(25),P=n.n(Q),F=Object(a.memo)(Object(c.b)((function(e){return{opts:e.availableTopics,isLoading:e.isLoading}}),(function(e){return{onGetTopicsCreator:function(){return e(g("GET_TOPICS"))}}}))((function(e){var t=e.opts,n=e.isLoading,r=e.onGetTopicsCreator;return Object(a.useEffect)((function(){r()}),[r]),o.a.createElement("main",{className:P.a.main},o.a.createElement("h1",{className:P.a.title},n?"Wait a second ...":"Just start typing ..."),o.a.createElement(W,{label:"Anonymous Testing Intelligent Service",options:t,isActive:!n}),o.a.createElement("footer",{className:P.a.footer},"v".concat("0.7.0"),o.a.createElement("a",{href:"https://github.com/AshenNagamaki",rel:"noopener noreferrer",target:"_blank"},"Change my mind")))}))),D=n(46),B=n.n(D),U=n(1),G=n.n(U),J=n(31),H=n.n(J),M=Object(a.memo)(Object(c.b)((function(e){return{answersState:e.answers,isLoading:e.isLoading}}),(function(e){return{onAddAnswer:function(t,n){return e(function(e,t){return{type:"ADD_ANSWER",questionNumber:e,optionNumber:t}}(t,n))}}}))((function(e){var t=e.qNum,n=e.oNum,a=e.option,r=e.answersState,i=e.isLoading,s=e.onAddAnswer,c=String.fromCharCode(65+n),u=R(r[t]!==c,H.a.option,H.a.active);return o.a.createElement("li",{role:"button",className:u,onClick:function(){!i&&s(t,c)},onKeyDown:function(e){return k(e,s(t,c))}},c," ",a)}))),K=n(47),Z=n.n(K),V=Object(a.memo)((function(e){var t=e.qNum,n=e.options.map((function(e,n){return o.a.createElement(M,{key:e,qNum:t,oNum:n,option:e})}));return o.a.createElement("ol",{className:Z.a.options},n)})),X=n(16),Y=n.n(X),z=Object(a.memo)((function(e){var t=e.qNum,n=e.question,a=e.options,r=e.answers;return o.a.createElement("li",{className:Y.a.question},o.a.createElement("span",{className:R(!r[t],Y.a.indicator,Y.a.inactive)}),o.a.createElement("p",{className:Y.a.questionText},t+1,". ",n),o.a.createElement("p",{className:Y.a.answerTitle},"Answer"),o.a.createElement(V,{qNum:t,options:a}))}));z.propTypes={qNum:G.a.number.isRequired,question:G.a.oneOfType([G.a.string,G.a.number]).isRequired,options:G.a.arrayOf(G.a.oneOfType([G.a.string,G.a.number])).isRequired,answers:G.a.arrayOf(G.a.string).isRequired};var $=n(48),ee=n.n($),te=function(e){var t=e.bName,n=e.bValue,a=e.isDisabled,r=e.clickHandler,i=e.children;return o.a.createElement("button",{className:ee.a.button,type:"button",name:t,value:n,disabled:a,onClick:r},i)};te.defaultProps={isDisabled:!1};var ne=n(12),ae=n.n(ne),oe=Object(c.b)((function(e){return{testData:e.test,answ:e.answers,isLoading:e.isLoading,reqResp:e.reqResponse}}),(function(e){return{onPostAnswerCreator:function(t,n){return e(g("POST_ANSWER",t,n))},onClearStateCreator:function(){return e({type:"CLEAR_STATE"})}}}))((function(e){var t=e.testData,n=e.answ,r=e.isLoading,i=e.reqResp,s=e.onPostAnswerCreator,c=e.onClearStateCreator,u=e.history,l=Object(a.useState)(!1),m=Object(N.a)(l,2),f=m[0],d=m[1],b=t.topic,_=t.author,E=t.questions,w=t.options,h=function(){c(),u.push("/aTis")},O=function(){window.pageYOffset>325?d(!0):d(!1)};Object(a.useEffect)((function(){return document.addEventListener("scroll",O),function(){window.removeEventListener("scroll",O)}}),[]),Object(a.useEffect)((function(){j(i)>1&&u.push("/aTis/outcome")}),[i,u]);var v=Object(a.useMemo)((function(){return E&&0!==E.length&&JSON.parse(JSON.stringify(n)).filter((function(e){return e})).length===E.length}),[E,n]),T=o.a.createElement(L,{direction:"left",outerClass:ae.a.returnWrapper,title:"Return to the initial window",clickHandler:h}),g=o.a.createElement(L,{direction:"top",outerClass:ae.a.backToTopWrapper,title:"Back to top",clickHandler:S}),y=o.a.createElement(B.a,{type:"Bars",width:60,height:60,color:"#f7f7f7",visible:r}),k=E&&0!==E.length&&E.map((function(e,t){return o.a.createElement(z,{key:"".concat(e),qNum:t,question:e,options:w&&w[t],answers:n})})),R=o.a.createElement(o.a.Fragment,null,o.a.createElement(te,{bName:"Answers submit button",bValue:"Submit answers",isDisabled:!v||r,clickHandler:function(){return s(b,n)}},v?"Submit answers":"Please answer all the questions to proceed"),o.a.createElement("button",{className:ae.a.questionsReturn,type:"button",name:"Return button",value:"OR return to the initial window",onClick:h},"OR return to the initial window")),q=o.a.createElement("section",{className:ae.a.questionsWrapper},o.a.createElement("h1",{className:ae.a.title},b),o.a.createElement("h3",{className:ae.a.author},_&&"by ".concat(_)),!r&&T,o.a.createElement("ul",{className:ae.a.questions},k),r?y:R,f&&g);return r||j(t)>1?q:o.a.createElement(p.a,{exact:!0,strict:!0,sensitive:!0,from:"/aTis/test",to:"/aTis"})})),re=n(49),ie=(n(98),n(13)),se=n.n(ie),ce=n(32),ue=n.n(ce),le=Object(c.b)((function(e){return{reqResp:e.reqResponse}}))((function(e){var t=e.reqResp,n=Object(p.g)(),a=t&&!t.reqFailed,r=R(a,se.a.image,se.a.onFailure);return o.a.createElement("div",{className:se.a.outcome},o.a.createElement(re.LazyLoadImage,{className:r,src:ue.a,alt:a?"Successfully completed":"Something went wrong",delayMethod:"debounce",effect:"blur",placeholderSrc:ue.a}),o.a.createElement("h1",{className:se.a.status},a?"Success!":"What the ...?"),o.a.createElement("h5",{className:se.a.topic},a?"Your results were successfully submitted for review!":"Looks like something went wrong!"),o.a.createElement("h5",{className:se.a.message},a?"Don't know what to do next? Go back and explore some other stuff.":"We had some issues submitting your answers. Please try again later."),o.a.createElement(te,{bName:"Return button",bValue:"Return to the initial window",clickHandler:function(){return n.push("/aTis")}},"Take me back"))})),pe=Object(c.b)((function(e){return{reqResp:e.reqResponse}}))((function(e){var t=e.reqResp;return o.a.createElement(p.d,null,o.a.createElement(p.b,{exact:!0,sensitive:!0,path:"/aTis/outcome"},j(t)>1?o.a.createElement(le,null):o.a.createElement(p.a,{exact:!0,strict:!0,sensitive:!0,from:"/aTis/outcome",to:"/aTis"})),o.a.createElement(p.b,{exact:!0,sensitive:!0,path:"/aTis/test",component:oe}),o.a.createElement(p.b,{path:"*",component:F}))})),me=n(50),fe={availableTopics:[],test:{},answers:[],isLoading:!1,reqResponse:{}},de=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function be(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}n(99);var _e=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||s.c,Ee=Object(s.d)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_ANSWER":if(e.answers[t.questionNumber]!==t.optionNumber){var n=Object(me.a)(e.answers);return n[t.questionNumber]=t.optionNumber,Object(y.a)(Object(y.a)({},e),{},{answers:n})}return e;case"INITIALIZE_REQUEST":return Object(y.a)(Object(y.a)({},e),{},{isLoading:!0});case"GET_TOPICS_REQUEST":return Object(y.a)(Object(y.a)({},e),{},{availableTopics:t.payload,isLoading:!1,reqResponse:{reqFailed:!1}});case"GET_TEST_REQUEST":return Object(y.a)(Object(y.a)({},e),{},{test:t.payload,isLoading:!1,reqResponse:{reqFailed:!1}});case"POST_ANSWER_REQUEST":return Object(y.a)(Object(y.a)({},e),{},{test:{},answers:[],isLoading:!1,reqResponse:Object(y.a)(Object(y.a)({},t.payload),{},{reqFailed:!1})});case"REQUEST_FAILURE":return Object(y.a)(Object(y.a)({},e),{},{test:{},answers:[],isLoading:!1,reqResponse:Object(y.a)(Object(y.a)({},q(t.payload)),{},{reqFailed:!0})});case"CLEAR_STATE":return fe;default:return e}}),_e(Object(s.a)(u.a)));i.a.render(o.a.createElement(l.a,{forceRefresh:!1,keyLength:12},o.a.createElement(c.a,{store:Ee},o.a.createElement(pe,null))),document.getElementById("react-root")),function(e){if("serviceWorker"in navigator){if(new URL("/aTis",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/aTis","/service-worker.js");de?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):be(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):be(t,e)}))}}()},11:function(e,t,n){e.exports={inputField:"Autocomplete_inputField__19i-H",active:"Autocomplete_active__25uXo",inactive:"Autocomplete_inactive__-p_VL",continueWrapper:"Autocomplete_continueWrapper__E99tO",options:"Autocomplete_options__32BPF",optionActive:"Autocomplete_optionActive__BfE9m",noShow:"Autocomplete_noShow__3vTZq"}},12:function(e,t,n){e.exports={questionsWrapper:"QuestionsTablet_questionsWrapper__1fS4C",questions:"QuestionsTablet_questions__2WxQD",title:"QuestionsTablet_title__2RZ9E",author:"QuestionsTablet_author__16q5q",questionsReturn:"QuestionsTablet_questionsReturn__SDy6u",backToTopWrapper:"QuestionsTablet_backToTopWrapper__1sKZh",returnWrapper:"QuestionsTablet_returnWrapper__2xOIa"}},13:function(e,t,n){e.exports={outcome:"Outcome_outcome__XAoEu",image:"Outcome_image__1Ipwo",onFailure:"Outcome_onFailure__BsfsD",status:"Outcome_status__3PnwX",topic:"Outcome_topic__1b8v8",message:"Outcome_message__M0G3t"}},16:function(e,t,n){e.exports={question:"Question_question__1Joyc",indicator:"Question_indicator__1JFCy",inactive:"Question_inactive__3p87E",questionText:"Question_questionText__1QfqT",answerTitle:"Question_answerTitle__1tHsi"}},21:function(e,t,n){e.exports={arrowTop:"ControlButton_arrowTop__1Z2BW",arrowRight:"ControlButton_arrowRight__1rR7i",arrowBottom:"ControlButton_arrowBottom__2gaaY",arrowLeft:"ControlButton_arrowLeft__qFRij"}},25:function(e,t,n){e.exports={main:"Main_main__3JhNz",title:"Main_title__2sJBY",footer:"Main_footer__3AekE"}},31:function(e,t,n){e.exports={option:"Option_option__3JaSi",active:"Option_active__13yNC"}},32:function(e,t,n){e.exports=n.p+"static/media/outcomeImage.e6e4d7b7.png"},47:function(e,t,n){e.exports={options:"Options_options__19g0J"}},48:function(e,t,n){e.exports={button:"Button_button__32FwK"}},51:function(e,t,n){e.exports=n(100)},99:function(e,t,n){}},[[51,1,2]]]);
//# sourceMappingURL=main.91bbee6c.chunk.js.map