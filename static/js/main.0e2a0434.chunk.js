(this.webpackJsonpatis=this.webpackJsonpatis||[]).push([[0],{100:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(17),i=n.n(r),s=n(15),c=n(5),u=n(44),l=n(14),p=n(4),m=n(28),f=n.n(m),d=n(45),b=n(23),_=n.n(b),O=_.a.create({baseURL:"https://atis-f5916.firebaseio.com/",headers:{Accept:"application/json","Content-Type":"application/json"}}),T="[CANCELLATION PROCESS] Operation canceled due to the API limits.",E=function(e){return{type:"POST_ANSWER_REQUEST",payload:e}},h=function(e){return{type:"GET_TEST_REQUEST",payload:e}},w=function(e){return{type:"GET_TOPICS_REQUEST",payload:e}},v=function(e){return{type:"REQUEST_FAILURE",payload:e}},g=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];var o;return function(){var t=Object(d.a)(f.a.mark((function t(a){var r,i,s,c,u;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a({type:"INITIALIZE_REQUEST"}),o&&o.cancel(T),r=_.a.CancelToken,o=r.source(),t.prev=4,"POST_ANSWER"!==e){t.next=13;break}return s=n[0],c=n[1],t.next=9,O.post("/gathered/".concat(s,"/answers.json"),JSON.stringify(c),{cancelToken:o.token});case 9:i=t.sent,a(E(i.data)),t.next=26;break;case 13:if("GET_TEST"!==e){t.next=21;break}return u=n,t.next=17,O.get("/test/".concat(u,".json"),{cancelToken:o.token});case 17:i=t.sent,a(h(i.data)),t.next=26;break;case 21:if("GET_TOPICS"!==e){t.next=26;break}return t.next=24,O.get("/topics.json",{cancelToken:o.token});case 24:i=t.sent,a(w(i.data));case 26:t.next=31;break;case 28:t.prev=28,t.t0=t.catch(4),a(v(t.t0));case 31:case"end":return t.stop()}}),t,null,[[4,28]])})));return function(e){return t.apply(this,arguments)}}()},A=n(3),N=n(20),y=function(){window.scrollTo({top:0,left:0,behavior:"smooth"})},k=function(e,t){"Enter"===e.key&&t()},S=function(e,t,n){return e?t:"".concat(t," ").concat(n)},j=function(e){return JSON.parse(JSON.stringify(e,Object.getOwnPropertyNames(e)))},R=function(e){return Object.keys(e).length},C=n(21),I=n.n(C),x=function(e){var t,n=e.direction,a=e.outerClass,r=e.title,i=e.clickHandler;switch(n){case"top":t=I.a.ArrowTop;break;case"right":t=I.a.ArrowRight;break;case"bottom":t=I.a.ArrowBottom;break;case"left":t=I.a.ArrowLeft}return o.a.createElement("div",{className:a},o.a.createElement("span",{role:"button",tabIndex:0,className:t,title:r,onClick:i,onKeyDown:function(e){return k(e,i)}}))};x.defaultProps={direction:"top",title:"Control button"};var L=n(11),q=n.n(L),Q=Object(c.b)(null,(function(e){return{onGetTestCreator:function(t){return e(g("GET_TEST",t))}}}))((function(e){var t,n=e.label,r=e.options,i=e.isActive,s=e.onGetTestCreator,c=Object(a.useState)({activeOption:0,filteredOptions:[],showOptions:!1,userInput:""}),u=Object(N.a)(c,2),l=u[0],m=u[1],f=l.activeOption,d=l.filteredOptions,b=l.showOptions,_=l.userInput,O=Object(a.useState)(!i),T=Object(N.a)(O,2),E=T[0],h=T[1],w=Object(p.g)(),v=function(e){m({activeOption:0,filteredOptions:[],showOptions:!1,userInput:e.currentTarget.innerText})},g=function(e){m((function(t){return Object(A.a)(Object(A.a)({},t),{},{activeOption:e})}))};_&&b&&(t=0!==d.length?o.a.createElement("ul",{className:q.a.Options},d.map((function(e,t){return o.a.createElement("li",{role:"menuitem",className:t===f?q.a.Active:void 0,key:e,onClick:v,onKeyDown:function(e){return k(e,v)}},e)}))):o.a.createElement("div",{className:q.a.NoShow},"Nothing to show. You are on your own!"));var y=o.a.createElement(x,{direction:"right",outerClass:q.a.ContinueWrapper,title:"Continue to the test",clickHandler:function(){s(l.userInput),w.push("/aTis/test")}}),S=Object(a.useMemo)((function(){return"".concat(q.a.InputField," ").concat((i?E||_:E)&&q.a.Active," ").concat(!i&&!E&&q.a.Inactive)}),[i,_,E]);return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:S},o.a.createElement("input",{id:"autocomplete",type:"text",name:"Autocomplete input field",value:_,placeholder:i?n:null,onChange:function(e){var t=e.currentTarget.value,n=r.filter((function(e){return e.toLowerCase().indexOf(t.toLowerCase())>-1}));m({activeOption:0,filteredOptions:n,showOptions:!0,userInput:e.currentTarget.value})},onKeyDown:function(e){13===e.keyCode?m((function(e){return Object(A.a)(Object(A.a)({},e),{},{activeOption:0,showOptions:!1,userInput:d[f]||e.userInput})})):38===e.keyCode?g(0===f?d.length-1:f-1):40===e.keyCode&&(f===d.length-1?g(0):g(f+1))},onFocus:function(){return i&&h(!0)},onBlur:function(){return i&&h(!1)},disabled:!i,autoComplete:"off"}),o.a.createElement("label",{htmlFor:"autocomplete"},i&&n),i&&_&&r.includes(_)&&y),t)}));Q.defaultProps={label:"I am a default label! My owner is too lazy to change me.",isActive:!0};var W=n(25),B=n.n(W),P=Object(a.memo)(Object(c.b)((function(e){return{opts:e.availableTopics,isLoading:e.isLoading}}),(function(e){return{onGetTopicsCreator:function(){return e(g("GET_TOPICS"))}}}))((function(e){var t=e.opts,n=e.isLoading,r=e.onGetTopicsCreator;return Object(a.useEffect)((function(){r()}),[r]),o.a.createElement("main",{className:B.a.Main},o.a.createElement("h1",{className:B.a.Title},n?"Wait a second ...":"Just start typing ..."),o.a.createElement(Q,{label:"Anonymous Testing Intelligent Service",options:t,isActive:!n}),o.a.createElement("footer",{className:B.a.Footer},"v".concat("0.6.0"),o.a.createElement("a",{href:"https://github.com/AshenNagamaki",rel:"noopener noreferrer",target:"_blank"},"Change my mind")))}))),U=n(46),F=n.n(U),D=n(1),G=n.n(D),H=n(31),M=n.n(H),J=Object(a.memo)(Object(c.b)((function(e){return{answersState:e.answers,isLoading:e.isLoading}}),(function(e){return{onAddAnswer:function(t,n){return e(function(e,t){return{type:"ADD_ANSWER",questionNumber:e,optionNumber:t}}(t,n))}}}))((function(e){var t=e.qNum,n=e.oNum,a=e.option,r=e.answersState,i=e.isLoading,s=e.onAddAnswer,c=String.fromCharCode(65+n),u=S(r[t]!==c,M.a.Option,M.a.Active);return o.a.createElement("li",{role:"button",className:u,onClick:function(){!i&&s(t,c)},onKeyDown:function(e){return k(e,s(t,c))}},c," ",a)}))),V=n(47),Y=n.n(V),K=Object(a.memo)((function(e){var t=e.qNum,n=e.options.map((function(e,n){return o.a.createElement(J,{key:e,qNum:t,oNum:n,option:e})}));return o.a.createElement("ol",{className:Y.a.Options},n)})),z=n(16),X=n.n(z),Z=Object(a.memo)((function(e){var t=e.qNum,n=e.question,a=e.options,r=e.answers;return o.a.createElement("li",{className:X.a.Question},o.a.createElement("span",{className:S(!r[t],X.a.Indicator,X.a.Hidden)}),o.a.createElement("p",{className:X.a.QuestionText},t+1,". ",n),o.a.createElement("p",{className:X.a.AnswerTitle},"Answer"),o.a.createElement(K,{qNum:t,options:a}))}));Z.propTypes={qNum:G.a.number.isRequired,question:G.a.oneOfType([G.a.string,G.a.number]).isRequired,options:G.a.arrayOf(G.a.oneOfType([G.a.string,G.a.number])).isRequired,answers:G.a.arrayOf(G.a.string).isRequired};var $=n(48),ee=n.n($),te=function(e){var t=e.bName,n=e.bValue,a=e.isDisabled,r=e.clickHandler,i=e.children;return o.a.createElement("button",{className:ee.a.Button,type:"button",name:t,value:n,disabled:a,onClick:r},i)};te.defaultProps={isDisabled:!1};var ne=n(12),ae=n.n(ne),oe=Object(c.b)((function(e){return{testData:e.test,answ:e.answers,isLoading:e.isLoading,reqResp:e.reqResponse}}),(function(e){return{onPostAnswerCreator:function(t,n){return e(g("POST_ANSWER",t,n))},onClearStateCreator:function(){return e({type:"CLEAR_STATE"})}}}))((function(e){var t=e.testData,n=e.answ,r=e.isLoading,i=e.reqResp,s=e.onPostAnswerCreator,c=e.onClearStateCreator,u=e.history,l=Object(a.useState)(!1),m=Object(N.a)(l,2),f=m[0],d=m[1],b=t.topic,_=t.author,O=t.questions,T=t.options,E=function(){c(),u.push("/aTis")},h=function(){window.pageYOffset>325?d(!0):d(!1)};Object(a.useEffect)((function(){return document.addEventListener("scroll",h),function(){window.removeEventListener("scroll",h)}}),[]),Object(a.useEffect)((function(){R(i)>1&&u.push("/aTis/outcome")}),[i,u]);var w=Object(a.useMemo)((function(){return O&&0!==O.length&&JSON.parse(JSON.stringify(n)).filter((function(e){return e})).length===O.length}),[O,n]),v=o.a.createElement(x,{direction:"left",outerClass:ae.a.ReturnWrapper,title:"Return to the initial window",clickHandler:E}),g=o.a.createElement(x,{direction:"top",outerClass:ae.a.BackToTopWrapper,title:"Back to top",clickHandler:y}),A=o.a.createElement(F.a,{type:"Bars",width:60,height:60,color:"#f7f7f7",visible:r}),k=O&&0!==O.length&&O.map((function(e,t){return o.a.createElement(Z,{key:"".concat(e),qNum:t,question:e,options:T&&T[t],answers:n})})),S=o.a.createElement(o.a.Fragment,null,o.a.createElement(te,{bName:"Answers submit button",bValue:"Submit answers",isDisabled:!w||r,clickHandler:function(){return s(b,n)}},w?"Submit answers":"Please answer all the questions to proceed"),o.a.createElement("button",{className:ae.a.QuestionsReturn,type:"button",name:"Return button",value:"OR return to the initial window",onClick:E},"OR return to the initial window")),j=o.a.createElement("section",{className:ae.a.QuestionsWrapper},o.a.createElement("h1",{className:ae.a.Title},b),o.a.createElement("h3",{className:ae.a.Author},_&&"by ".concat(_)),!r&&v,o.a.createElement("ul",{className:ae.a.Questions},k),r?A:S,f&&g);return r||R(t)>1?j:o.a.createElement(p.a,{exact:!0,strict:!0,sensitive:!0,from:"/aTis/test",to:"/aTis"})})),re=n(49),ie=(n(98),n(13)),se=n.n(ie),ce=n(32),ue=n.n(ce),le=Object(c.b)((function(e){return{reqResp:e.reqResponse}}))((function(e){var t=e.reqResp,n=Object(p.g)(),a=t&&!t.reqFailed,r=S(a,se.a.Image,se.a.OnFailure);return o.a.createElement("div",{className:se.a.Outcome},o.a.createElement(re.LazyLoadImage,{className:r,src:ue.a,alt:a?"Successfully completed":"Something went wrong",delayMethod:"debounce",effect:"blur",placeholderSrc:ue.a}),o.a.createElement("h1",{className:se.a.Title},a?"Success!":"What the ...?"),o.a.createElement("h5",{className:se.a.Topic},a?"Your results were successfully submitted for review!":"Looks like something went wrong!"),o.a.createElement("h5",{className:se.a.Text},a?"Don't know what to do next? Go back and explore some other stuff.":"We had some issues submitting your answers. Please try again later."),o.a.createElement(te,{bName:"Return button",bValue:"Return to the initial window",clickHandler:function(){return n.push("/aTis")}},"Take me back"))})),pe=Object(c.b)((function(e){return{reqResp:e.reqResponse}}))((function(e){var t=e.reqResp;return o.a.createElement(p.d,null,o.a.createElement(p.b,{exact:!0,sensitive:!0,path:"/aTis/outcome"},R(t)>1?o.a.createElement(le,null):o.a.createElement(p.a,{exact:!0,strict:!0,sensitive:!0,from:"/aTis/outcome",to:"/aTis"})),o.a.createElement(p.b,{exact:!0,sensitive:!0,path:"/aTis/test",component:oe}),o.a.createElement(p.b,{path:"*",component:P}))})),me=n(50),fe={availableTopics:[],test:{},answers:[],isLoading:!1,reqResponse:{}},de=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function be(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}n(99);var _e=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||s.c,Oe=Object(s.d)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_ANSWER":if(e.answers[t.questionNumber]!==t.optionNumber){var n=Object(me.a)(e.answers);return n[t.questionNumber]=t.optionNumber,Object(A.a)(Object(A.a)({},e),{},{answers:n})}return e;case"INITIALIZE_REQUEST":return Object(A.a)(Object(A.a)({},e),{},{isLoading:!0});case"GET_TOPICS_REQUEST":return Object(A.a)(Object(A.a)({},e),{},{availableTopics:t.payload,isLoading:!1,reqResponse:{reqFailed:!1}});case"GET_TEST_REQUEST":return Object(A.a)(Object(A.a)({},e),{},{test:t.payload,isLoading:!1,reqResponse:{reqFailed:!1}});case"POST_ANSWER_REQUEST":return Object(A.a)(Object(A.a)({},e),{},{test:{},answers:[],isLoading:!1,reqResponse:Object(A.a)(Object(A.a)({},t.payload),{},{reqFailed:!1})});case"REQUEST_FAILURE":return Object(A.a)(Object(A.a)({},e),{},{test:{},answers:[],isLoading:!1,reqResponse:Object(A.a)(Object(A.a)({},j(t.payload)),{},{reqFailed:!0})});case"CLEAR_STATE":return fe;default:return e}}),_e(Object(s.a)(u.a)));i.a.render(o.a.createElement(l.a,{forceRefresh:!1,keyLength:12},o.a.createElement(c.a,{store:Oe},o.a.createElement(pe,null))),document.getElementById("react-root")),function(e){if("serviceWorker"in navigator){if(new URL("/aTis",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/aTis","/service-worker.js");de?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):be(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):be(t,e)}))}}()},11:function(e,t,n){e.exports={InputField:"Autocomplete_InputField__29W9j",Active:"Autocomplete_Active__3bNsm",Inactive:"Autocomplete_Inactive__K6Hyr",ContinueWrapper:"Autocomplete_ContinueWrapper__3rv73",Options:"Autocomplete_Options__3AAGk",NoShow:"Autocomplete_NoShow__2GJfu"}},12:function(e,t,n){e.exports={QuestionsWrapper:"QuestionsTablet_QuestionsWrapper__3AglG",Questions:"QuestionsTablet_Questions__1yjx3",Title:"QuestionsTablet_Title__3zDeM",Author:"QuestionsTablet_Author__2a70f",QuestionsReturn:"QuestionsTablet_QuestionsReturn__39cE9",BackToTopWrapper:"QuestionsTablet_BackToTopWrapper__3V8bv",ReturnWrapper:"QuestionsTablet_ReturnWrapper__6BCNt"}},13:function(e,t,n){e.exports={Outcome:"Outcome_Outcome__iOdyB",Image:"Outcome_Image__13_Y5",OnFailure:"Outcome_OnFailure__3U1Y6",Title:"Outcome_Title__3ROkd",Topic:"Outcome_Topic__3pdQK",Text:"Outcome_Text__vgrCV"}},16:function(e,t,n){e.exports={Question:"Question_Question__1WCx4",Indicator:"Question_Indicator__1d25f",Hidden:"Question_Hidden__V_ve5",QuestionText:"Question_QuestionText__3a4Yj",AnswerTitle:"Question_AnswerTitle__79C6k"}},21:function(e,t,n){e.exports={ArrowTop:"ControlButton_ArrowTop__1XJdp",ArrowRight:"ControlButton_ArrowRight__2UmmL",ArrowBottom:"ControlButton_ArrowBottom__2iofY",ArrowLeft:"ControlButton_ArrowLeft__126ay"}},25:function(e,t,n){e.exports={Main:"Main_Main__1ji4S",Title:"Main_Title__34Czv",Footer:"Main_Footer__1C-A6"}},31:function(e,t,n){e.exports={Option:"Option_Option__bl3MH",Active:"Option_Active__1c913"}},32:function(e,t,n){e.exports=n.p+"static/media/outcomeImage.e6e4d7b7.png"},47:function(e,t,n){e.exports={Options:"Options_Options__1UHUE"}},48:function(e,t,n){e.exports={Button:"Button_Button__2Ajf-"}},51:function(e,t,n){e.exports=n(100)},99:function(e,t,n){}},[[51,1,2]]]);
//# sourceMappingURL=main.0e2a0434.chunk.js.map